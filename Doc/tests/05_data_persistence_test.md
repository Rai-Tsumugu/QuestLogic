# 05_data_persistence_test.md

## テスト概要
Firestoreへの分析結果保存、データ整合性のテスト。

## テストケース

### 1. データ保存 (Data Saving)
- [ ] **TC-05-001**: クエスト完了後のデータ作成
    - **手順**: AI分析完了後。
    - **期待値**: `quest_results` コレクションに新規ドキュメントが作成され、`aiResult`, `storagePath`, `status: pending` 等が正しく格納されていること。

### 2. データ取得 (Querying)
- [ ] **TC-05-002**: 親ダッシュボード用クエリ
    - **手順**: `familyId` を指定し、日付降順で取得。
    - **期待値**: 所属する子供のクエスト結果が最新順に取得できること。
- [ ] **TC-05-003**: 子履歴用クエリ
    - **手順**: `childId` を指定して取得。
    - **期待値**: 自分のクエスト結果のみが取得できること。
