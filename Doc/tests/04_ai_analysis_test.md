# 04_ai_analysis_test.md

## テスト概要
Gemini APIによる画像解析、スコアリング、フィードバック生成のテスト。

## テストケース

### 1. 正常系分析 (Normal Analysis)
- [ ] **TC-04-001**: 高評価パターン
    - **データ**: びっしり書かれたノート画像2枚 (Before/After)。
    - **期待値**: 
        - Score >= 80
        - コメントに「すごい」「頑張った」等のポジティブな言葉が含まれること。
- [ ] **TC-04-002**: プロセス検知 (消しゴム/赤ペン)
    - **データ**: 消しゴムの跡や赤ペン修正が明確なノート画像。
    - **期待値**: 
        - `process` スコアが高いこと。
        - コメントで「修正したこと」「直したこと」に言及があること。
        - `detected_features` に `erasure` や `red_pen` が含まれること。

### 2. 異常系・不正検知 (Fraud Detection)
- [ ] **TC-04-003**: 書き写し疑い（短時間・大量）
    - **データ**: 書き込み量は多いが、Durationが極端に短い(例: 3分)場合のメタデータ。
    - **期待値**: 
        - Score < 40
        - コメントで「速すぎるかも？」「丁寧に書こう」といった指摘があること。
        - タグに「急いで書いた可能性」などが付くこと。
- [ ] **TC-04-004**: 不適切な画像
    - **データ**: ノートではなく、風景や全く関係ない画像。
    - **期待値**: エラー `INVALID_SUBJECT` または低スコアで「ノートの写真を撮ってね」と返されること。
