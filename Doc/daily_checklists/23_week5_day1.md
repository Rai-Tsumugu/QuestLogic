# Week 5 Day 1: E2E Testing (通しテスト)（当日運用版）

## 作業時間目安
- 想定: 4-5時間
- 実行主体: 作業者

## 本日のゴール
1. 新規インストール〜クエスト完了〜親承認までの全フローを、エラーなく通せる。
1. 発見したバグを GitHub Issue (または `task.md`) にリストアップする。

## 本日の重点差分
- E2EをケースID化し、バグ票と1対1で紐付ける。

## 開始前チェック
- [ ] ブランチ確認: `git branch --show-current` が対象ブランチを指している
- [ ] 依存関係確認: `cd frontend && npm install` が成功している
- [ ] Firebase接続先確認: 開発用プロジェクトIDを使用している
- [ ] 実機接続確認: 必要端末（親/子）でアプリ起動できる
- [ ] ログ取得手段確認: Metro, Firebase Console, Functionsログを閲覧できる

## 実行チェックリスト

### STEP-23.1 Scenario A (Happy Path)
- [ ] 実施操作: Scenario A (Happy Path)。実施内容: 新規登録 -> カメラ -> AI -> 承認 -> エネルギー獲得。
- [ ] コマンド/操作: 実機で手順実行 + 結果をチェックシートへ記録
- [ ] 期待結果: Scenario A (Happy Path) に関する主導線がエラーなく完走し、異常系は意図した挙動になる。
- [ ] 証跡 (EVID-23.1): スクリーンショット、ログ抜粋、DB/Storage確認パスを記録する

### STEP-23.2 Scenario B (Error Path)
- [ ] 実施操作: Scenario B (Error Path)。実施内容: 機内モードでの動作、拒否された場合の動作。
- [ ] コマンド/操作: 実機で手順実行 + 結果をチェックシートへ記録
- [ ] 期待結果: Scenario B (Error Path) に関する主導線がエラーなく完走し、異常系は意図した挙動になる。
- [ ] 証跡 (EVID-23.2): スクリーンショット、ログ抜粋、DB/Storage確認パスを記録する

### STEP-23.3 実機総合確認
- [ ] 実施操作: 本日の主導線を実機で通し、正常系と代表異常系を各1回確認する
- [ ] コマンド/操作: 実機で操作し、MetroログとFirebase Consoleを同時確認
- [ ] 期待結果: 完了判定に必要な証拠が揃い、再現性のある結果が得られる。
- [ ] 証跡 (EVID-23.3): 実機動画/スクリーンショット、ログ、判定メモ

## 失敗時の切り分け
- [ ] 権限エラー: Firebase/Auth/Storage ルールとログイン状態を確認
- [ ] 画面遷移不良: 直前ステップの入力値・Context・パラメータ受け渡しを確認
- [ ] データ不整合: Firestore実データとUI表示を同時に突合
- [ ] 再実行条件: 原因を1つ修正後、同一ケースを最初から再実行して再現有無を確認

## 完了判定（Go / No-Go）
- [ ] 全STEPの期待結果が満たされている
- [ ] 全STEPで証跡（EVID）が残っている
- [ ] 実機で主導線が完走し、重大障害がない
- 判定ルール: 上記のいずれか未達なら **No-Go**。未達項目を修正して再確認後に翌日へ進む。

## 参照仕様
- `Doc/specs/09_screen_flow.md`
- `Doc/specs/10_error_ui.md`
